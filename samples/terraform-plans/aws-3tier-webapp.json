{
  "format_version": "1.2",
  "terraform_version": "1.6.0",
  "planned_values": {},
  "resource_changes": [
    {
      "address": "aws_vpc.main",
      "type": "aws_vpc",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "cidr_block": "10.0.0.0/16",
          "enable_dns_hostnames": true,
          "enable_dns_support": true,
          "tags": {
            "Name": "production-vpc",
            "Environment": "production",
            "Project": "webapp"
          }
        }
      }
    },
    {
      "address": "aws_subnet.public_1",
      "type": "aws_subnet",
      "name": "public_1",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "vpc_id": "aws_vpc.main.id",
          "cidr_block": "10.0.1.0/24",
          "availability_zone": "us-east-1a",
          "map_public_ip_on_launch": true,
          "tags": { "Name": "public-subnet-1a", "Tier": "public" }
        }
      }
    },
    {
      "address": "aws_subnet.public_2",
      "type": "aws_subnet",
      "name": "public_2",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "vpc_id": "aws_vpc.main.id",
          "cidr_block": "10.0.2.0/24",
          "availability_zone": "us-east-1b",
          "map_public_ip_on_launch": true,
          "tags": { "Name": "public-subnet-1b", "Tier": "public" }
        }
      }
    },
    {
      "address": "aws_subnet.private_app_1",
      "type": "aws_subnet",
      "name": "private_app_1",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "vpc_id": "aws_vpc.main.id",
          "cidr_block": "10.0.10.0/24",
          "availability_zone": "us-east-1a",
          "tags": { "Name": "private-app-subnet-1a", "Tier": "application" }
        }
      }
    },
    {
      "address": "aws_subnet.private_app_2",
      "type": "aws_subnet",
      "name": "private_app_2",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "vpc_id": "aws_vpc.main.id",
          "cidr_block": "10.0.11.0/24",
          "availability_zone": "us-east-1b",
          "tags": { "Name": "private-app-subnet-1b", "Tier": "application" }
        }
      }
    },
    {
      "address": "aws_subnet.private_db_1",
      "type": "aws_subnet",
      "name": "private_db_1",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "vpc_id": "aws_vpc.main.id",
          "cidr_block": "10.0.20.0/24",
          "availability_zone": "us-east-1a",
          "tags": { "Name": "private-db-subnet-1a", "Tier": "database" }
        }
      }
    },
    {
      "address": "aws_subnet.private_db_2",
      "type": "aws_subnet",
      "name": "private_db_2",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "vpc_id": "aws_vpc.main.id",
          "cidr_block": "10.0.21.0/24",
          "availability_zone": "us-east-1b",
          "tags": { "Name": "private-db-subnet-1b", "Tier": "database" }
        }
      }
    },
    {
      "address": "aws_internet_gateway.main",
      "type": "aws_internet_gateway",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "vpc_id": "aws_vpc.main.id",
          "tags": { "Name": "main-igw" }
        }
      }
    },
    {
      "address": "aws_nat_gateway.main",
      "type": "aws_nat_gateway",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "subnet_id": "aws_subnet.public_1.id",
          "allocation_id": "eipalloc-12345",
          "tags": { "Name": "main-nat-gw" }
        }
      }
    },
    {
      "address": "aws_security_group.alb",
      "type": "aws_security_group",
      "name": "alb",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "vpc_id": "aws_vpc.main.id",
          "name": "alb-security-group",
          "description": "Security group for Application Load Balancer",
          "ingress": [
            { "from_port": 80, "to_port": 80, "protocol": "tcp", "cidr_blocks": ["0.0.0.0/0"] },
            { "from_port": 443, "to_port": 443, "protocol": "tcp", "cidr_blocks": ["0.0.0.0/0"] }
          ],
          "tags": { "Name": "alb-sg" }
        }
      }
    },
    {
      "address": "aws_security_group.app",
      "type": "aws_security_group",
      "name": "app",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "vpc_id": "aws_vpc.main.id",
          "name": "app-security-group",
          "description": "Security group for application servers",
          "ingress": [
            { "from_port": 8080, "to_port": 8080, "protocol": "tcp", "security_groups": ["sg-alb-12345"] }
          ],
          "tags": { "Name": "app-sg" }
        }
      }
    },
    {
      "address": "aws_security_group.db",
      "type": "aws_security_group",
      "name": "db",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "vpc_id": "aws_vpc.main.id",
          "name": "db-security-group",
          "description": "Security group for RDS database",
          "ingress": [
            { "from_port": 5432, "to_port": 5432, "protocol": "tcp", "security_groups": ["sg-app-12345"] }
          ],
          "tags": { "Name": "db-sg" }
        }
      }
    },
    {
      "address": "aws_lb.main",
      "type": "aws_lb",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "name": "webapp-alb",
          "load_balancer_type": "application",
          "internal": false,
          "subnets": ["aws_subnet.public_1.id", "aws_subnet.public_2.id"],
          "security_groups": ["aws_security_group.alb.id"],
          "tags": { "Name": "webapp-alb" }
        }
      }
    },
    {
      "address": "aws_instance.app_1",
      "type": "aws_instance",
      "name": "app_1",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "ami": "ami-0c55b159cbfafe1f0",
          "instance_type": "t3.large",
          "subnet_id": "aws_subnet.private_app_1.id",
          "vpc_security_group_ids": ["aws_security_group.app.id"],
          "tags": { "Name": "app-server-1", "Role": "application" }
        }
      }
    },
    {
      "address": "aws_instance.app_2",
      "type": "aws_instance",
      "name": "app_2",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "ami": "ami-0c55b159cbfafe1f0",
          "instance_type": "t3.large",
          "subnet_id": "aws_subnet.private_app_2.id",
          "vpc_security_group_ids": ["aws_security_group.app.id"],
          "tags": { "Name": "app-server-2", "Role": "application" }
        }
      }
    },
    {
      "address": "aws_instance.app_3",
      "type": "aws_instance",
      "name": "app_3",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "ami": "ami-0c55b159cbfafe1f0",
          "instance_type": "t3.large",
          "subnet_id": "aws_subnet.private_app_1.id",
          "vpc_security_group_ids": ["aws_security_group.app.id"],
          "tags": { "Name": "app-server-3", "Role": "application" }
        }
      }
    },
    {
      "address": "aws_db_instance.main",
      "type": "aws_db_instance",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "identifier": "webapp-postgres",
          "engine": "postgres",
          "engine_version": "15.4",
          "instance_class": "db.r6g.large",
          "allocated_storage": 100,
          "storage_type": "gp3",
          "multi_az": true,
          "db_subnet_group_name": "webapp-db-subnet-group",
          "vpc_security_group_ids": ["aws_security_group.db.id"],
          "tags": { "Name": "webapp-postgres-primary" }
        }
      }
    },
    {
      "address": "aws_db_instance.replica",
      "type": "aws_db_instance",
      "name": "replica",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "identifier": "webapp-postgres-replica",
          "replicate_source_db": "aws_db_instance.main.identifier",
          "instance_class": "db.r6g.large",
          "tags": { "Name": "webapp-postgres-replica" }
        }
      }
    },
    {
      "address": "aws_elasticache_cluster.sessions",
      "type": "aws_elasticache_cluster",
      "name": "sessions",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "cluster_id": "webapp-sessions",
          "engine": "redis",
          "engine_version": "7.0",
          "node_type": "cache.r6g.large",
          "num_cache_nodes": 2,
          "tags": { "Name": "session-cache" }
        }
      }
    },
    {
      "address": "aws_s3_bucket.assets",
      "type": "aws_s3_bucket",
      "name": "assets",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "bucket": "webapp-static-assets-prod",
          "tags": { "Name": "static-assets" }
        }
      }
    },
    {
      "address": "aws_s3_bucket.logs",
      "type": "aws_s3_bucket",
      "name": "logs",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "bucket": "webapp-access-logs-prod",
          "tags": { "Name": "access-logs" }
        }
      }
    },
    {
      "address": "aws_lambda_function.image_processor",
      "type": "aws_lambda_function",
      "name": "image_processor",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "function_name": "image-processor",
          "runtime": "nodejs20.x",
          "handler": "index.handler",
          "memory_size": 1024,
          "timeout": 60,
          "tags": { "Name": "image-processor-lambda" }
        }
      }
    },
    {
      "address": "aws_lambda_function.notification_sender",
      "type": "aws_lambda_function",
      "name": "notification_sender",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "mode": "managed",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "function_name": "notification-sender",
          "runtime": "python3.11",
          "handler": "main.handler",
          "memory_size": 256,
          "timeout": 30,
          "tags": { "Name": "notification-lambda" }
        }
      }
    }
  ]
}
